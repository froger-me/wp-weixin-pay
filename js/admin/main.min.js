jQuery.fn.currencyFormat=function(){return this.each(function(){var i=this.value;if(""!==i&&"."!==i){var t=i.split(".");""===t[0]&&(t[0]=0,this.value=t.join(".")),t[0].startsWith(0)&&("0"!==t[0]||t[1])&&(t[0]=parseInt(t[0]),this.value=t.join(".")),t[1]&&2<t[1].length&&(t[1]=t[1].substring(0,2),this.value=t.join("."))}else this.value=""}),this},jQuery(document).ready(function(a){a("#wp_weixin_qr_amount").on("keyup",function(i){i.preventDefault(),a(this).currencyFormat()}),a(".qr-payment-button").on("click",function(i){i.preventDefault();var t=a(this),n=a("#"+t.data("img")),e={amount:a("#wp_weixin_qr_amount").val(),fixed:a("#wp_weixin_qr_amount_fixed").prop("checked"),productName:a("#wp_weixin_qr_product_name").val(),url:n.data("default_url"),action:"wp_weixin_pay_get_settings_qr"};a.ajax({url:WpWeixinPay.ajax_url,type:"POST",data:e}).done(function(i){i.success?(n.attr("src",n.data("base_url")+i.data),n.css("visibility","visible"),n.parent().children("span").hide()):(n.css("visibility","hidden"),n.parent().children("span").show())}).fail(function(i,t){WpWeixinPay.debug&&window.console.log(t)})})});